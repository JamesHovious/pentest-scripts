These are my configs/instructions for creating rogue WPA2-PSK and WPA2-Enterprise APs.

These configs/instructions are stolen/mashed/mutated from various places on the interwebs.

To bridge the rouge AP (`wlan0`) to the internal network (`eth0`) configure your `/etc/network/interfaces` to be:

```
# The loopback network interface
auto lo
iface lo inet loopback

allow-hotplug wlan0
iface wlan0 inet manual

auto eth0
allow-hotplug eth0
iface eth0 inet dhcp

# Setup bridge
auto br0
iface br0 inet static
        address 192.168.1.200
        netmask 255.255.255.0
        network 192.168.1.0
        broadcast 172.16.1.255
        gateway 172.16.1.1
        dns-nameservers 172.16.1.11
        bridge-ports eth0 wlan0
```

To test/bypass [Cisco Meraki](https://documentation.meraki.com/MR/Monitoring_and_Reporting/Air_Marshal_Rogue_SSIDs) just use macchanger to address:
> When we detect an SSID being broadcast, we compare it to other known MAC addresses on the LAN. If a wired MAC and the broadcasted BSSID MAC match on the 3rd and 4th bytes of the MAC, and the rest of the bytes differ by 5 bits or less, it is classified as a Rogue SSID.

## WPA2-PSK

`hostapd` should already be installed in kali. So just `hostapd hostapd.conf`

## WPA2-Enterprise

Get the prereqs
```
apt-get install libnl-genl-3-dev
apt-get install libssl1.0-dev
```

Now apply the hostapd-wpe.patch:
```
$ git clone https://github.com/OpenSecurityResearch/hostapd-wpe
$ wget http://hostap.epitest.fi/releases/hostapd-2.2.tar.gz
$ tar -zxf hostapd-2.2.tar.gz
$ cd hostapd-2.2
$ patch -p1 < ../hostapd-wpe/hostapd-wpe.patch
$ cd hostapd
```
Edit .config file and uncomment:
CONFIG_LIBNL32=y

`$ make`

I copied the certs directory and scripts from FreeRADIUS to ease that
portion of things. You should just be able to:
```
$ cd ../../hostapd-wpe/certs
$ ./bootstrap
```

Use the config files from this project and drop them into the `../../hostapd-2.2/hostapd` directory.

then finally:
```
$ cd ../../hostapd-2.2/hostapd
$ sudo ./hostapd-wpe hostapd-wpe.conf
```
